const evtsTest = [
    {
        "id": "6b7aa6f5-657e-4cb9-9105-bfec617aefdb",
        "source": "https://www.avito.ru",
        "spec_version": "1.0",
        "type": "com_awakari_feeds_v1",
        "attributes": {
            "awakarigroupid": {
                "ce_string": "default"
            },
            "awakarimatchfound": {
                "ce_boolean": false
            },
            "awakariuserid": {
                "ce_string": "https://www.avito.ru"
            },
            "dataschema": {
                "ce_string": "http://schema.org/Product"
            },
            "image": {
                "ce_string": "https://80.img.avito.st/image/1/1.oehYCba1DQFOqbcBFkPmmSmrDwHmoq8AVqgPAw.oX5pBUGmxSH6Nhcs24i4Vs4BTDUIGDlEgntzD10Auo0"
            },
            "name": {
                "ce_string": "Кроссовки Nike Pegasus Trail 2"
            },
            "objecturl": {
                "ce_string": "https://www.avito.ru/kungur/odezhda_obuv_aksessuary/krossovki_nike_pegasus_trail_2_4290496076"
            },
            "offersavailability": {
                "ce_string": "https://schema.org/LimitedAvailability"
            },
            "offersprice": {
                "ce_integer": "4190.99",
            },
            "offerspricecurrency": {
                "ce_string": "RUB"
            },
            "time": {
                "ce_timestamp": "2024-04-06T23:56:25.924Z"
            },
            "latitude": {
                "ce_string": "12.345",
            },
            "longitude": {
                "ce_integer": 67,
            },
            "language": {
                "ce_string": "RU",
            },
            "subject": {
                "ce_string": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh"
            },
            "categories": {
                "ce_string": "tag1 tag12 tag123 tag1234 tag12345"
            }
        }
    },
    {
        "id": "6b7aa6f5-657e-4cb9-9105-bfec617aefdb",
        "source": "https://www.avito.ru",
        "spec_version": "1.0",
        "type": "com_awakari_feeds_v1",
        "attributes": {
            "awakarigroupid": {
                "ce_string": "default"
            },
            "awakarimatchfound": {
                "ce_boolean": false
            },
            "awakariuserid": {
                "ce_string": "https://www.avito.ru"
            },
            "dataschema": {
                "ce_string": "http://schema.org/Product"
            },
            "image": {
                "ce_string": "https://80.img.avito.st/image/1/1.oehYCba1DQFOqbcBFkPmmSmrDwHmoq8AVqgPAw.oX5pBUGmxSH6Nhcs24i4Vs4BTDUIGDlEgntzD10Auo0"
            },
            "name": {
                "ce_string": "Кроссовки Nike Pegasus Trail 2"
            },
            "objecturl": {
                "ce_string": "https://www.avito.ru/kungur/odezhda_obuv_aksessuary/krossovki_nike_pegasus_trail_2_4290496076"
            },
            "offersavailability": {
                "ce_string": "https://schema.org/LimitedAvailability"
            },
            "offersprice": {
                "ce_integer": "4190"
            },
            "offerspricecurrency": {
                "ce_string": "RUB"
            },
            "time": {
                "ce_timestamp": "2024-04-06T23:56:25.924Z"
            },
            "latitude": {
                "ce_string": "12.345",
            },
            "longitude": {
                "ce_integer": 67,
            },
            "language": {
                "ce_string": "RU",
            },
            "subject": {
                "ce_string": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh"
            },
            "categories": {
                "ce_string": "tag1 tag12 tag123 tag1234 tag12345"
            }
        }
    },
    {
        "id": "6b7aa6f5-657e-4cb9-9105-bfec617aefdb",
        "source": "https://www.avito.ru",
        "spec_version": "1.0",
        "type": "com_awakari_feeds_v1",
        "attributes": {
            "awakarigroupid": {
                "ce_string": "default"
            },
            "awakarimatchfound": {
                "ce_boolean": false
            },
            "awakariuserid": {
                "ce_string": "https://www.avito.ru"
            },
            "dataschema": {
                "ce_string": "http://schema.org/Product"
            },
            "image": {
                "ce_string": "https://80.img.avito.st/image/1/1.oehYCba1DQFOqbcBFkPmmSmrDwHmoq8AVqgPAw.oX5pBUGmxSH6Nhcs24i4Vs4BTDUIGDlEgntzD10Auo0"
            },
            "name": {
                "ce_string": "Кроссовки Nike Pegasus Trail 2"
            },
            "objecturl": {
                "ce_string": "https://www.avito.ru/kungur/odezhda_obuv_aksessuary/krossovki_nike_pegasus_trail_2_4290496076"
            },
            "offersavailability": {
                "ce_string": "https://schema.org/LimitedAvailability"
            },
            "offersprice": {
                "ce_integer": 4190.990000
            },
            "offerspricecurrency": {
                "ce_string": "RUB"
            },
            "time": {
                "ce_timestamp": "2024-04-06T23:56:25.924Z"
            },
            "latitude": {
                "ce_string": "12.345",
            },
            "longitude": {
                "ce_integer": 67,
            },
            "language": {
                "ce_string": "RU",
            },
            "subject": {
                "ce_string": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh"
            },
            "categories": {
                "ce_string": "tag1 tag12 tag123 tag1234 tag12345"
            }
        }
    },
    {
        "id": "6b7aa6f5-657e-4cb9-9105-bfec617aefdb",
        "source": "https://www.avito.ru",
        "spec_version": "1.0",
        "type": "com_awakari_feeds_v1",
        "attributes": {
            "awakarigroupid": {
                "ce_string": "default"
            },
            "awakarimatchfound": {
                "ce_boolean": false
            },
            "awakariuserid": {
                "ce_string": "https://www.avito.ru"
            },
            "dataschema": {
                "ce_string": "http://schema.org/Product"
            },
            "image": {
                "ce_string": "https://80.img.avito.st/image/1/1.oehYCba1DQFOqbcBFkPmmSmrDwHmoq8AVqgPAw.oX5pBUGmxSH6Nhcs24i4Vs4BTDUIGDlEgntzD10Auo0"
            },
            "name": {
                "ce_string": "Кроссовки Nike Pegasus Trail 2"
            },
            "objecturl": {
                "ce_string": "https://www.avito.ru/kungur/odezhda_obuv_aksessuary/krossovki_nike_pegasus_trail_2_4290496076"
            },
            "offersavailability": {
                "ce_string": "https://schema.org/LimitedAvailability"
            },
            "offersprice": {
                "ce_integer": 41900000
            },
            "offerspricecurrency": {
                "ce_string": "RUB"
            },
            "time": {
                "ce_timestamp": "2024-04-06T23:56:25.924Z"
            },
            "latitude": {
                "ce_string": "12.345",
            },
            "longitude": {
                "ce_integer": 67,
            },
            "language": {
                "ce_string": "RU",
            },
            "subject": {
                "ce_string": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh"
            },
            "categories": {
                "ce_string": "tag1 tag12 tag123 tag1234 tag12345"
            }
        }
    },
    {
        "id": "6b7aa6f5-657e-4cb9-9105-bfec617aefdb",
        "source": "https://www.avito.ru",
        "spec_version": "1.0",
        "type": "com_awakari_feeds_v1",
        "attributes": {
            "awakarigroupid": {
                "ce_string": "default"
            },
            "awakarimatchfound": {
                "ce_boolean": false
            },
            "awakariuserid": {
                "ce_string": "https://www.avito.ru"
            },
            "dataschema": {
                "ce_string": "http://schema.org/Product"
            },
            "image": {
                "ce_string": "https://80.img.avito.st/image/1/1.oehYCba1DQFOqbcBFkPmmSmrDwHmoq8AVqgPAw.oX5pBUGmxSH6Nhcs24i4Vs4BTDUIGDlEgntzD10Auo0"
            },
            "name": {
                "ce_string": "Кроссовки Nike Pegasus Trail 2"
            },
            "objecturl": {
                "ce_string": "https://www.avito.ru/kungur/odezhda_obuv_aksessuary/krossovki_nike_pegasus_trail_2_4290496076"
            },
            "offersavailability": {
                "ce_string": "https://schema.org/LimitedAvailability"
            },
            "offersprice": {
                "ce_integer": 4190.990000
            },
            "offerspricecurrency": {
                "ce_string": "RUB"
            },
            "time": {
                "ce_timestamp": "2024-04-06T23:56:25.924Z"
            },
            "latitude": {
                "ce_string": "12.345",
            },
            "longitude": {
                "ce_integer": 67,
            },
            "language": {
                "ce_string": "RU",
            },
            "subject": {
                "ce_string": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh"
            },
            "categories": {
                "ce_string": "tag1 tag12 tag123 tag1234 tag12345"
            }
        }
    },
    {
        "id": "6b7aa6f5-657e-4cb9-9105-bfec617aefdb",
        "source": "https://www.avito.ru",
        "spec_version": "1.0",
        "type": "com_awakari_feeds_v1",
        "attributes": {
            "awakarigroupid": {
                "ce_string": "default"
            },
            "awakarimatchfound": {
                "ce_boolean": false
            },
            "awakariuserid": {
                "ce_string": "https://www.avito.ru"
            },
            "dataschema": {
                "ce_string": "http://schema.org/Product"
            },
            "image": {
                "ce_string": "https://80.img.avito.st/image/1/1.oehYCba1DQFOqbcBFkPmmSmrDwHmoq8AVqgPAw.oX5pBUGmxSH6Nhcs24i4Vs4BTDUIGDlEgntzD10Auo0"
            },
            "name": {
                "ce_string": "Кроссовки Nike Pegasus Trail 2"
            },
            "objecturl": {
                "ce_string": "https://www.avito.ru/kungur/odezhda_obuv_aksessuary/krossovki_nike_pegasus_trail_2_4290496076"
            },
            "offersavailability": {
                "ce_string": "https://schema.org/LimitedAvailability"
            },
            "offersprice": {
                "ce_integer": 4190.990000
            },
            "offerspricecurrency": {
                "ce_string": "RUB"
            },
            "time": {
                "ce_timestamp": "2024-04-06T23:56:25.924Z"
            },
            "latitude": {
                "ce_string": "12.345",
            },
            "longitude": {
                "ce_integer": 67,
            },
            "language": {
                "ce_string": "RU",
            },
            "subject": {
                "ce_string": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh"
            },
            "categories": {
                "ce_string": "tag1 tag12 tag123 tag1234 tag12345"
            }
        }
    },
    {
        "id": "6b7aa6f5-657e-4cb9-9105-bfec617aefdb",
        "source": "https://www.avito.ru",
        "spec_version": "1.0",
        "type": "com_awakari_feeds_v1",
        "attributes": {
            "awakarigroupid": {
                "ce_string": "default"
            },
            "awakarimatchfound": {
                "ce_boolean": false
            },
            "awakariuserid": {
                "ce_string": "https://www.avito.ru"
            },
            "dataschema": {
                "ce_string": "http://schema.org/Product"
            },
            "image": {
                "ce_string": "https://80.img.avito.st/image/1/1.oehYCba1DQFOqbcBFkPmmSmrDwHmoq8AVqgPAw.oX5pBUGmxSH6Nhcs24i4Vs4BTDUIGDlEgntzD10Auo0"
            },
            "name": {
                "ce_string": "Кроссовки Nike Pegasus Trail 2"
            },
            "objecturl": {
                "ce_string": "https://www.avito.ru/kungur/odezhda_obuv_aksessuary/krossovki_nike_pegasus_trail_2_4290496076"
            },
            "offersavailability": {
                "ce_string": "https://schema.org/LimitedAvailability"
            },
            "offersprice": {
                "ce_integer": 4190.990000
            },
            "offerspricecurrency": {
                "ce_string": "RUB"
            },
            "time": {
                "ce_timestamp": "2024-04-06T23:56:25.924Z"
            },
            "latitude": {
                "ce_string": "12.345",
            },
            "longitude": {
                "ce_integer": 67,
            },
            "language": {
                "ce_string": "RU",
            },
            "subject": {
                "ce_string": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh"
            },
            "categories": {
                "ce_string": "tag1 tag12 tag123 tag1234 tag12345"
            }
        }
    },
    {
        "id": "6b7aa6f5-657e-4cb9-9105-bfec617aefdb",
        "source": "https://www.avito.ru",
        "spec_version": "1.0",
        "type": "com_awakari_feeds_v1",
        "attributes": {
            "awakarigroupid": {
                "ce_string": "default"
            },
            "awakarimatchfound": {
                "ce_boolean": false
            },
            "awakariuserid": {
                "ce_string": "https://www.avito.ru"
            },
            "dataschema": {
                "ce_string": "http://schema.org/Product"
            },
            "image": {
                "ce_string": "https://80.img.avito.st/image/1/1.oehYCba1DQFOqbcBFkPmmSmrDwHmoq8AVqgPAw.oX5pBUGmxSH6Nhcs24i4Vs4BTDUIGDlEgntzD10Auo0"
            },
            "name": {
                "ce_string": "Кроссовки Nike Pegasus Trail 2"
            },
            "objecturl": {
                "ce_string": "https://www.avito.ru/kungur/odezhda_obuv_aksessuary/krossovki_nike_pegasus_trail_2_4290496076"
            },
            "offersavailability": {
                "ce_string": "https://schema.org/LimitedAvailability"
            },
            "offersprice": {
                "ce_integer": 4190.990000
            },
            "offerspricecurrency": {
                "ce_string": "RUB"
            },
            "time": {
                "ce_timestamp": "2024-04-06T23:56:25.924Z"
            },
            "latitude": {
                "ce_string": "12.345",
            },
            "longitude": {
                "ce_integer": 67,
            },
            "language": {
                "ce_string": "RU",
            },
            "subject": {
                "ce_string": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh"
            },
            "categories": {
                "ce_string": "tag1 tag12 tag123 tag1234 tag12345"
            }
        }
    },
    {
        "id": "6b7aa6f5-657e-4cb9-9105-bfec617aefdb",
        "source": "https://www.avito.ru",
        "spec_version": "1.0",
        "type": "com_awakari_feeds_v1",
        "attributes": {
            "awakarigroupid": {
                "ce_string": "default"
            },
            "awakarimatchfound": {
                "ce_boolean": false
            },
            "awakariuserid": {
                "ce_string": "https://www.avito.ru"
            },
            "dataschema": {
                "ce_string": "http://schema.org/Product"
            },
            "image": {
                "ce_string": "https://80.img.avito.st/image/1/1.oehYCba1DQFOqbcBFkPmmSmrDwHmoq8AVqgPAw.oX5pBUGmxSH6Nhcs24i4Vs4BTDUIGDlEgntzD10Auo0"
            },
            "name": {
                "ce_string": "Кроссовки Nike Pegasus Trail 2"
            },
            "objecturl": {
                "ce_string": "https://www.avito.ru/kungur/odezhda_obuv_aksessuary/krossovki_nike_pegasus_trail_2_4290496076"
            },
            "offersavailability": {
                "ce_string": "https://schema.org/LimitedAvailability"
            },
            "offersprice": {
                "ce_integer": 4190.990000
            },
            "offerspricecurrency": {
                "ce_string": "RUB"
            },
            "time": {
                "ce_timestamp": "2024-04-06T23:56:25.924Z"
            },
            "latitude": {
                "ce_string": "12.345",
            },
            "longitude": {
                "ce_integer": 67,
            },
            "language": {
                "ce_string": "RU",
            },
            "subject": {
                "ce_string": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh"
            },
            "categories": {
                "ce_string": "tag1 tag12 tag123 tag1234 tag12345"
            }
        }
    },
    {
        "id": "6b7aa6f5-657e-4cb9-9105-bfec617aefdb",
        "source": "https://www.avito.ru",
        "spec_version": "1.0",
        "type": "com_awakari_feeds_v1",
        "attributes": {
            "awakarigroupid": {
                "ce_string": "default"
            },
            "awakarimatchfound": {
                "ce_boolean": false
            },
            "awakariuserid": {
                "ce_string": "https://www.avito.ru"
            },
            "dataschema": {
                "ce_string": "http://schema.org/Product"
            },
            "image": {
                "ce_string": "https://80.img.avito.st/image/1/1.oehYCba1DQFOqbcBFkPmmSmrDwHmoq8AVqgPAw.oX5pBUGmxSH6Nhcs24i4Vs4BTDUIGDlEgntzD10Auo0"
            },
            "name": {
                "ce_string": "Кроссовки Nike Pegasus Trail 2"
            },
            "objecturl": {
                "ce_string": "https://www.avito.ru/kungur/odezhda_obuv_aksessuary/krossovki_nike_pegasus_trail_2_4290496076"
            },
            "offersavailability": {
                "ce_string": "https://schema.org/LimitedAvailability"
            },
            "offersprice": {
                "ce_integer": 4190.990000
            },
            "offerspricecurrency": {
                "ce_string": "RUB"
            },
            "time": {
                "ce_timestamp": "2024-04-06T23:56:25.924Z"
            },
            "latitude": {
                "ce_string": "12.345",
            },
            "longitude": {
                "ce_integer": 67,
            },
            "language": {
                "ce_string": "RU",
            },
            "subject": {
                "ce_string": "hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh"
            },
            "categories": {
                "ce_string": "tag1 tag12 tag123 tag1234 tag12345"
            }
        }
    }
];

document
    .getElementById("form_search")
    .addEventListener("submit", function (evt){
        evt.preventDefault();
        const q = document.getElementById("query").value;
        if (q != null && q !== "") {
            clearSearchResults();
            document.getElementById("events-menu").style.display = "flex";
            const headers = getAuthHeaders();
            document.getElementById("wait").style.display = "block";
            Past
                .search(q, headers)
                .then(resp => {
                    if (resp) {
                        if (!resp.ok) {
                            handleResponseStatus(`Search [${q}]`, resp.code);
                            return null;
                        }
                        return resp.json();
                    } else {
                        return null;
                    }
                })
                .then(data => {
                    if (data && data.hasOwnProperty("msgs") && data.msgs.length > 0) {
                        displayEvents(data.msgs);
                    }
                })
                .finally(_ => {
                    document.getElementById("wait").style.display = "none";
                    //displayEvents(evtsTest);
                });
        }
    });


function clearSearchResults() {
    let elemEvents = document.getElementById("events");
    elemEvents.innerHTML = "";
}

async function closeSearchResults() {
    let elemEvents = document.getElementById("events");
    let elemEventsMenu = document.getElementById("events-menu");
    if (elemEvents.innerHTML === "") {
        elemEventsMenu.style.display = "none";
    } else if (elemEventsMenu.style.display !== "none") {
        document.getElementById("events-menu").style.display = "none";
        elemEvents.innerHTML = "";
    }
}

const templateEvent = (txt, time, src, link, lang, loc, price, more) => `
    <div class="h-[52px] w-86 sm:w-[624px] flex align-middle">
        <a href="${link}" target="_blank" class="w-80 sm:w-[600px]">
            <p class="text-gray-800 dark:text-gray-300 w-80 sm:w-[600px] hover:text-blue-500 truncate">
                ${txt}
            </p>
            <p class="font-mono text-xs w-80 sm:w-[600px] truncate">
                <span class="text-stone-500">
                    ${time.getHours().toString().padStart(2, '0')}:${time.getMinutes().toString().padStart(2, '0')}:${time.getSeconds().toString().padStart(2, '0')}
                </span>
                <span class="text-slate-500">${src}</span>
            </p>
            <p class="flex text-xs w-80 sm:w-[600px] text-zinc-500 truncate">
                <span> 
                    ${lang}                
                </span>
                <span>
                    ${loc}                
                </span>
                <span>
                    ${price}                
                </span>
                <span>
                    ${more}                    
                </span>
            </p>
        </a>
    </div>
`

function displayEvents(evts) {
    let elemEvts = document.getElementById("events");
    for (let evt of evts) {
        //
        if (elemEvts.childElementCount >= 10) {
            elemEvts.removeChild(elemEvts.lastElementChild);
        }
        let time;
        if (evt.attributes.hasOwnProperty("time")) {
            time = new Date(evt.attributes.time.ce_timestamp);
        } else {
            time = new Date();
        }
        //
        let link = `pub-msg.html?id=${evt.id}`;
        //
        let txt = evt.text_data;
        if (evt.attributes.hasOwnProperty("description")) {
            txt = evt.attributes.name.ce_string;
        }
        if (evt.attributes.hasOwnProperty("headline")) {
            txt = evt.attributes.name.ce_string;
        }
        if (evt.attributes.hasOwnProperty("name")) {
            txt = evt.attributes.name.ce_string;
        }
        if (evt.attributes.hasOwnProperty("summary")) {
            txt = evt.attributes.summary.ce_string;
        }
        if (evt.attributes.hasOwnProperty("title")) {
            txt = evt.attributes.title.ce_string;
        }
        txt = txt.replace(/(<([^>]+)>)/gi, ""); // remove HTML tags
        //
        let lang = "";
        if (evt.attributes.hasOwnProperty("language")) {
            lang = evt.attributes.language.ce_string.toUpperCase() + "&nbsp;";
        }
        //
        let loc = "";
        if (evt.attributes.hasOwnProperty("latitude") && evt.attributes.hasOwnProperty("longitude")) {
            loc = "<svg class=\"mr-1\" fill=\"currentColor\" width=\"16px\" height=\"16px\" viewBox=\"0 0 256 256\" xmlns=\"http://www.w3.org/2000/svg\">\n" +
                "  <path d=\"M127.99414,15.9971a88.1046,88.1046,0,0,0-88,88c0,75.29688,80,132.17188,83.40625,134.55469a8.023,8.023,0,0,0,9.1875,0c3.40625-2.38281,83.40625-59.25781,83.40625-134.55469A88.10459,88.10459,0,0,0,127.99414,15.9971ZM128,72a32,32,0,1,1-32,32A31.99909,31.99909,0,0,1,128,72Z\"/>\n" +
                "</svg>"
        }
        //
        let price = "";
        if (evt.attributes.hasOwnProperty("offersprice") && evt.attributes.hasOwnProperty("offerspricecurrency")) {
            price = evt.attributes.offersprice.ce_string ? evt.attributes.offersprice.ce_string : evt.attributes.offersprice.ce_integer;
            try {
                price = parseFloat(price).toFixed(2).toString();
                if (price.endsWith("00")) {
                    price = parseInt(price);
                }
            } catch (_) {
                if (price.length > 10) {
                    price = price.slice(0, 9) + "…"
                }
            }
            switch (evt.attributes.offerspricecurrency.ce_string.toLowerCase()) {
                case "usd":
                case "aud":
                case "cad":
                case "sgd":
                case "hkd":
                case "nzd":
                case "mxn":
                case "twd":
                case "brl":
                    price = "$" + price;
                    break;
                case "eur":
                    price = "€" + price;
                    break;
                case "cny":
                case "jpy":
                    price = "¥" + price;
                    break;
                case "gbp":
                    price = "£" + price;
                    break;
                case "inr":
                    price = "₹" + price;
                    break;
                case "rub":
                    price = "₽" + price;
                    break;
                default:
                    price = evt.attributes.offerspricecurrency.ce_string + price;
            }
            price += "&nbsp;";
        }
        //
        let more = "";
        if (evt.attributes.hasOwnProperty("subject")) {
            more = evt.attributes.subject.ce_string;
            if (more.length > 16) {
                more = more.slice(0, 15) + "…"
            }
        }
        //
        if (evt.attributes.hasOwnProperty("categories")) {
            more = (more.length > 0 ? more + " " : more) + evt.attributes.categories.ce_string;
        } else if(evt.attributes.hasOwnProperty("feedcategories")) {
            more = (more.length > 0 ? more + " " : more) + evt.attributes.feedcategories.ce_string;
        }
        if (more.length > 36) {
            more = more.slice(0, 35) + "…"
        }
        //
        elemEvts.innerHTML = templateEvent(txt, time, evt.source, link, lang, loc, price, more) + elemEvts.innerHTML;
    }
}

function loginAndSubscribe() {
    const q = document.getElementById("query").value;
    window.location.assign(`login.html?redirect=sub-details.html&args=${q}`);
}
