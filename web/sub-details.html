<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="msapplication-TileColor" content="#6366f1">
    <meta name="theme-color" content="#6366f1">

    <title>Awakari App</title>

    <link rel="stylesheet" href="spectre-icons.min.css">
    <link href="tailwind.output.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <script src="api/response.js"></script>
    <script src="auth.js"></script>
    <script src="api/sources.js"></script>
    <script src="api/status.js"></script>
    <script src="attrs.js"></script>
    <script src="api/subscriptions.js"></script>

</head>
<body class="bg-white dark:bg-gray-900 text-slate-700 dark:text-gray-300">

<nav class="text-xl flex p-1 sm:p-4 text-slate-700 dark:text-slate-200">
    <button onclick="window.location.assign('sub.html')" class="mr-1">
        <svg width="26px" height="26px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6 12H18M6 12L11 7M6 12L11 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </button>
    <span>Interest Details</span>
</nav>

<div class="m-1 flex-1 flex flex-col space-y-1">
    <div class="flex justify-center m-1">
        <form class="max-w-[480px] grow">

            <div class="flex mb-4" id="area-id">
                <label for="id" style="margin-top: 0.125rem">Id</label>
                <input type="text" readonly="readonly" id="id" class="ml-2 border-none">
                <a style="display: none" id="sub-feed-link">
                    <img class="ml-2" src="feed-icon.svg" width="20" height="20" alt="Subscription feed link"/>
                </a>
            </div>

            <div class="flex flex-col space-y-3">

                <div class="flex">
                    <label for="description" class="w-20" style="margin-top: 0.125rem">
                        <span class="tooltip">
                            Description
                            <span class="tooltiptext" style="width: 332px">Describe your interest to distinguish from others.</span>
                        </span>
                    </label>
                    <input type="text" id="description">
                </div>

                <div class="flex space-x-4">
                    <label class="flex space-x-1">
                        <input id="public"
                               checked="checked"
                               type="checkbox" class="h-4 w-4"
                               style="margin-right: 0.25rem; margin-top: 0.125rem"/>
                        <span class="tooltip" style="margin-top: 0.125rem">
                            Public
                            <span class="tooltiptext" style="width: 320px">
                                <p>Public interest is visible to others.</p>
                                <p>May be followed by non-owner.</p>
                            </span>
                        </span>
                    </label>

                    <label class="flex space-x-1">
                        <span class="tooltip" style="margin-top: 0.125rem">
                            Followers
                            <span class="tooltiptext" style="width: 240px">
                                Total followers count.
                            </span>
                        </span>
                        <input type="text" readonly="readonly" id="followers" class="w-32 border-none">
                    </label>

                </div>

                <div class="flex pt-1">
                    <span class="w-20 flex" style="margin-top: 0.125rem">
                        <span class="tooltip">
                            Expires
                            <span class="tooltiptext">
                                <p>Local time when the following expires.</p>
                                <p>The following never expires when it's empty.</p>
                            </span>
                        </span>
                    </span>
                    <input type="datetime-local" id="expires" class="h-5 border outline-none border-slate-400 dark:border-slate-700 dark:background-gray-800"/>
                </div>

                <div class="flex">
                    <span class="pt-1 w-20 flex" style="margin-top: 0.125rem">
                        <span class="tooltip">
                            Conditions
                            <span class="tooltiptext">
                                <p>Message matching conditions.</p>
                                <p>Choose a condition type: text or number.</p>
                                <p>At least one is required.</p>
                                <p>A message should match all when multiple.</p>
                            </span>
                        </span>
                    </span>
                    <button id="button-add-cond-txt" type="button" class="flex justify-center text-center w-[100px]">
                        <span style="font-size: large; margin-top: 0.175rem"><b>+</b></span>&nbsp;<span class="mt-1">Text</span>
                    </button>
                    <button id="button-add-cond-num" type="button" class="ml-3 flex justify-center text-center w-[100px]">
                        <span style="font-size: large; margin-top: 0.175rem"><b>+</b></span>&nbsp;<span class="mt-1">Number</span>
                    </button>
                </div>

            </div>

            <div class="space-y-1 pt-2" id="conditions">
            </div>

            <div class="flex items-center justify-center space-x-2 pt-1">
                <div class="absolute" id="wait" style="display: none">
                    <img src="wait.gif"/>
                </div>
                <button id="button-delete" type="button" class="flex delete justify-center text-center w-[100px]" onclick="deleteSubscription()">
                    <svg fill="currentColor" width="21px" height="21px" viewBox="-3.5 0 19 19" xmlns="http://www.w3.org/2000/svg" class="cf-icon-svg"><path d="M11.383 13.644A1.03 1.03 0 0 1 9.928 15.1L6 11.172 2.072 15.1a1.03 1.03 0 1 1-1.455-1.456l3.928-3.928L.617 5.79a1.03 1.03 0 1 1 1.455-1.456L6 8.261l3.928-3.928a1.03 1.03 0 0 1 1.455 1.456L7.455 9.716z"/></svg>
                    <span class="mt-1">Delete</span>
                </button>
                <button id="button-submit" type="button" class="flex submit justify-center text-center w-[100px]" onclick="submitSubscription()">
                    <svg width="21px" height="21px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M20.6097 5.20743C21.0475 5.54416 21.1294 6.17201 20.7926 6.60976L10.7926 19.6098C10.6172 19.8378 10.352 19.9793 10.0648 19.9979C9.77765 20.0166 9.49637 19.9106 9.29289 19.7072L4.29289 14.7072C3.90237 14.3166 3.90237 13.6835 4.29289 13.2929C4.68342 12.9024 5.31658 12.9024 5.70711 13.2929L9.90178 17.4876L19.2074 5.39034C19.5441 4.95258 20.172 4.87069 20.6097 5.20743Z" fill="currentColor"/>
                    </svg>
                    <span class="mt-1">Submit</span>
                </button>
                <div id="sub-new-success-dialog"
                     class="border border-gray-500 p-1 rounded-md shadow-lg bg-white dark:bg-gray-900 flex flex-col space-y-1"
                     style="position: absolute; margin-top: -200px; display: none">
                    <div class="flex w-full">
                        <div class="w-full">
                            <span class="text-lg">Success</span>
                        </div>
                        <button type="button"
                                class="w-6 h-6"
                                onclick="document.getElementById('sub-new-success-dialog').style.display = 'none'">
                            âœ•
                        </button>
                    </div>
                    <p>
                        Interest registered
                    </p>
                    <p>
                        Id: <span id="new-sub-id"></span>
                    </p>
                    <button type="button"
                            id="sub-new-success-btn-tg"
                            onclick="window.open('https://t.me/AwakariBot', '_blank')"
                            class="flex w-full justify-center text-center"
                            style="display: none">
                        <span class="pt-1">&#10697; Follow Updates</span>
                    </button>
                    <button type="button"
                            id="sub-new-success-btn-feed"
                            class="flex w-full justify-center text-center"
                            style="display: none">
                        <span class="pt-1">&#10697; Results Feed</span>
                    </button>
                </div>
            </div>

            <div class="py-2">
                <label class="flex align-middle">
                    <input id="sub-discover-sources"
                           checked="checked"
                           type="checkbox" class="h-4 w-4"
                           style="margin-right: 0.25rem"/>
                    <span>Discover relevant sources on submit</span>
                </label>

                <div class="py-2 space-y-1" id="sub-discovered-sources" style="display: none">
                    <p>Sources discovered:</p>
                </div>

            </div>

        </form>
    </div>
</div>

<script src="sub-details.js?v=4be6219"></script>

</body>
</html>
